\chapter{GPS}

\newcommand{\nmea}{NMEA 0183}

\section{Протокол \nmea}

\nmea --- текстовый протокол связи морского и навигационного оборудования.

\bigskip

\url{http://www8.garmin.com/support/pdf/NMEA_0183.pdf}

\url{http://www8.garmin.com/support/pdf/NMEA_0183.pdf}

\url{http://ru.wikipedia.org/wiki/NMEA_0183}

\url{http://www.robosoft.info/ru/technologies/knowledgebase/nmea0183}

\bigskip

Датум WGS84

\bigskip 

\url{http://ru.wikipedia.org/wiki/WGS_84}

\bigskip
Большинство GPS приемников отдают данные по \nmea, но вместо режима последовательного
порта 4800 8N1 прописанного в протоколе, могут использовать другие режимы, характерные
для портов RS232 (9600, 115200). Координаты передаются в датуме WGS84.

\bigskip
Формат сообщения NMEA\footnote{регулярные выражения
\url{http://en.wikipedia.org/wiki/Regular_expression}}:

\begin{verbatim}
\$[A-Z]5(,<data>)+\*[0-9A-F]2<CR><LF>
\end{verbatim}

\begin{itemize}
  \item символ \verb+$+
  \item 5-буквенный идентификатор сообщения. 
  Первые две буквы --- идентификатор источника сообщения, 
  следующие три буквы --- идентификатор формата сообщения
\begin{itemize}
\item GPGGA --- данные о последнем определении местоположения
\item GPGLL --- координаты, широта/долгота
\item GPGSA --- DOP (GPS) и активные спутники
\item GPGSV --- наблюдаемые спутники
\item GPWPL --- параметры заданной точки
\item GPBOD --- азимут одной точки относительно другой
\item GPRMB --- pекомендуемый минимум навигационных данных для достижения заданной точки
\item GPRMC --- pекомендуемый минимум навигационных данных: информацию о времени, 
местоположении (WGS84), курсе и скорости, передаваемые навигационным GPS приёмником. 
Контрольная сумма обязательна для этого сообщения, интервалы передачи не должны 
превышать 2 секунды. 
\item GPRTE --- маршруты
\item HCHDG --- данные от компаса
\end{itemize}
  \item блоки данных, разделённых запятыми.
  Пустые данные, не заданные в середине строки, оставляют запятую.
  Пустые данные в конце строки могут отбрасываться вместе с запятой.
  \item символ \verb+*+
  \item двузначное hex число --- контрольная XOR-сумма всех байт в строке между 
  \verb+$+ и \verb+*+.
  \item конец строки \verb+<CR><LF> = 0x0D 0x0A = \r\n +
\end{itemize}

\section{\$GPRMC --- pекомендуемый минимум навигационных данных}

\begin{verbatim}
$GPRMC,hhmmss.ss,[AV],GGMM.MM,[NS],gggmm.mm,[EW],v.v,b.b,ddmmyy,x.x,n,m*hh<CR><LF>
\end{verbatim}

\begin{itemize}
\item GP -- приём сигналов GPS, GN -- ГЛОНАСС
\item RMC -- Recommended Minimum sentence C
\item hhmmss.ss -- время фиксации местоположения по времени UTC
\item A -- данные достоверны, V -- данные недостоверны
\item GGMM.MM -- широта, 2 цифры градусов, 2 цифры целых минут, точка и дробная часть минут;
\item N/S -- северная/южная широта
\item gggmm.mm -- долгота, 3 цифры градусов, 2 цифры целых минут, точка и дробная часть минут;
\item E/W -- восточная/западная долгота
\item v.v -- горизонтальная составляющая скорости в узлах
\item b.b -- путевой угол (направление скорости) в градусах:
$0^\circ$ север, $90^\circ$ восток, $180^\circ$ юг, $270^\circ$ запад
\item ddmmyy -- дата
\item x.x -- магнитное склонение в градусах (часто отсутствует)
\item n -- направление магнитного склонения: для получения 
магнитного курса магнитное склонение необходимо вычесть (E)
или прибавить (W) к истинному курсу
\item m -- индикатор режима: A -- автономный, D -- дифференциальный, 
E -- аппроксимация, N -- недостоверные данные (часто отсутствует, 
данное поле включая запятую отсутствует в старых версиях NMEA)
\end{itemize}

\section{Tistar15}

\includegraphics{apps/GPS_TiStar15.jpg}

\bigskip Цена: 250 руб. \url{http://www.voltmaster.ru/cgi-bin/qwery.pl?id=127000056703&group=700000}

\section{WISMO228}

\includegraphics{apps/GPS_GSM_WISMO_228.jpg}

\bigskip Цена: 1070 руб. \url{http://www.voltmaster.ru/cgi-bin/qwery.pl?id=127000881980&group=700000}

 